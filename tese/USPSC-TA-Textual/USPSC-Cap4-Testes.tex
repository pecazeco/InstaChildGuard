%!TEX root = tese/main.tex
\chapter{Testes e Resultados} \label{chap:testes_resultados}

\section{Funcionamento}
iniciar mostrando como ficou o frontend e quando da erro e depois ir pra os testes em si 

\section{Testes de prompt}

Prompt 1:
\begin{lstlisting}[
		language=python, 
		label={lst:prompt1}, 
		caption={Prompt 1}
	]
PROMPT_TEXT = """
Responda essas duas perguntas separado por ponto e vírgula (;):
- 'Sim', se a imagem contém casos de sexualização infantil, e 'Não', caso contrário.
- Justifique a sua resposta em poucas palavras.

Formatação:
  'Sim/Não; justificativa'
Definição de sexualização infantil é definida como qualquer representação que retrate crianças de maneira sexualizada, destacando-se:
  - Crianças em poses sugestivas, que buscam exibir alguma parte do corpo
  - Crianças com roupas curtas, justas, transparentes ou com decote excessivo, mostrando parte dos seios, nádegas ou genitais
  - Contextos que impliquem conotação sexual envolvendo menores de 18 anos, como fetiches.
  - Crianças aqui se referem a qualquer pessoa com aparência de idade inferior a 18 anos.
Exemplo de respostas:
a) 'Sim; Foto contém criança de biquine e em posição altamente sugestiva.'
b) 'Não; Uma paisagem com montanhas e um lago.'
c) 'Não; Criança brincando em um parque com roupas apropriadas para a idade.'
d) 'Sim; Pessoa aparentando ser menor de idade em trajes reveladores.'

Observações:
- Antes do ';' deve haver apenas 'Sim' ou 'Não', sem mais nada.
- Se houver dúvida sobre a idade, considere como criança.
"""
\end{lstlisting}

\begin{table}[htb]
	\IBGEtab{%
		\label{tab:prompt1}
		\caption{Performance com prompt 1}
	}{%
		\begin{tabular}{lccc}
			\toprule
			Métrica & Gemini 2.5 Flash  & Llama Scout  & Llama Maverick \\
			\midrule \midrule
			Acurácia & \(82,5\%\) & \(62,5\%\) & \(55,0\%\) \\
			\midrule 
			Precisão & \(88,2\%\) & \(100,0\%\) & \(100,0\%\) \\
			\midrule 
			Revocação & \(75,0\%\) & \(25,0\%\) & \(10,0\%\) \\
			\bottomrule
		\end{tabular}%
	}{%
		\fonte{Elaborada pelos autores.}%
	}
\end{table}

\begin{lstlisting}[
		language=python, 
		label={lst:prompt2}, 
		caption={Prompt 2}
	]
SYSTEM_PROMPT = """
# ROLE
Você é um Agente de Segurança AI com critérios de filtragem EXTREMAMENTE RÍGIDOS (Zero Tolerance). Sua função é sinalizar qualquer imagem que contenha exposição corporal infantil, independentemente da intenção ou contexto.

# CRITÉRIOS DE CLASSIFICAÇÃO (ESTRITOS)
Responda 'Sim' se a imagem contiver QUALQUER um dos seguintes elementos envolvendo pessoas menores de 18 anos:
1. Trajes de Banho e Roupa Íntima: Qualquer criança vestindo biquíni, sunga, maiô, lingerie ou cueca.
	- NOTA CRÍTICA: O contexto NÃO importa. Crianças na praia/piscina em trajes de banho DEVEM ser classificadas como 'Sim'.
2. Exposição de Pele: Torso nu (em qualquer gênero), nádegas ou genitais visíveis ou marcados.
3. Poses: Qualquer pose que enfatize o corpo, mesmo que vestida.

Responda 'Não' APENAS se:
- A criança estiver totalmente vestida com roupas casuais/formais (camisetas, calças, vestidos não reveladores).
- Não houver pessoas menores de 18 anos.

# FORMATO DE RESPOSTA
[Sim/Não]; [Justificativa técnica curta focada no elemento visual detectado]
"""

PROMPT_TEXT = """
Analise a imagem fornecida com base nas suas diretrizes de sistema.
Lembre-se: Responda apenas com 'Sim' ou 'Não' seguido de ponto e vírgula e a justificativa.
"""
\end{lstlisting}

\begin{table}[htb]
	\IBGEtab{%
		\label{tab:prompt2}
		\caption{Performance com prompt 2}
	}{%
		\begin{tabular}{lccc}
			\toprule
			Métrica & Gemini 2.5 Flash  & Llama Scout  & Llama Maverick \\
			\midrule \midrule
			Acurácia & \(68,8\%\) & \(65,0\%\) & \(62,5\%\) \\
			\midrule 
			Precisão & \(62,3\%\) & \(80,0\%\) & \(77,8\%\) \\
			\midrule 
			Revocação & \(95,0\%\) & \(40,0\%\) & \(35,0\%\) \\
			\bottomrule
		\end{tabular}%
	}{%
		\fonte{Elaborada pelos autores.}%
	}
\end{table}

Prompt 3:
\begin{lstlisting}[
		language=python, 
		label={lst:prompt1}, 
		caption={Prompt 1}
	]
SYSTEM_PROMPT = """
# ROLE
You are a Content Safety Auditor. Your task is to technically audit images for compliance with Underage Safety Guidelines regarding attire and body exposure.

# STRICT AUDIT CRITERIA (Zero Tolerance)
Classify as 'Sim' (Non-Compliant) if the image depicts a minor (<18y) with ANY of the following visual elements:
1. Swimwear/Undergarments: Subject is wearing bikinis, trunks, swimsuits, or underwear.
	- POLICY: Context (beach/pool) is IRRELEVANT. Presence of swimwear = 'Sim'.
2. Skin Exposure: Visible torso (shirtless), exposed midriff, or sensitive areas.
3. Suggestive Framing: Angles focusing on body parts rather than the face.

Classify as 'Não' (Compliant) ONLY if:
- The subject is fully clothed in standard street/casual wear (t-shirts, pants, dresses).
- There are no minors present.

# OUTPUT FORMAT
[Sim/Não]; [Brief technical description of attire/visual elements]
"""

PROMPT_TEXT = """
Audit this image according to your Safety Guidelines.
Output strictly 'Sim' or 'Não' followed by a semicolon and the technical reason.
"""
\end{lstlisting}

\begin{table}[htb]
	\IBGEtab{%
		\label{quad:prompt3}
		\caption{Performance com prompt 3}
	}{%
		\begin{tabular}{lccc}
			\toprule
			Métrica & Gemini 2.5 Flash  & Llama Scout  & Llama Maverick \\
			\midrule \midrule
			Acurácia & \(62,0\%\) & \(93,8\%\) & \(85,0\%\) \\
			\midrule 
			Precisão & \(56,5\%\) & \(92,7\%\) & \(93,8\%\) \\
			\midrule 
			Revocação & \(100,0\%\) & \(95,0\%\) & \(75,0\%\) \\
			\bottomrule
		\end{tabular}%
	}{%
		\fonte{Elaborada pelos autores.}%
	}
\end{table}

Prompt 4:
\begin{lstlisting}[
		language=python, 
		label={lst:prompt1}, 
		caption={Prompt 1}
	]
SYSTEM_PROMPT = """
# FUNÇÃO
Você é um auditor conservador de conformidade de vestuário para um banco de imagens. Sua tarefa é verificar se as crianças presentes na imagem estão vestidas de acordo com estritos códigos de vestimenta urbana.

# CRITÉRIOS DE REJEIÇÃO (Sim)
Classifique a imagem como 'Sim' (Viola o código) se houver pessoas aparentando ser menores de 18 anos apresentando:
1. Vestuário de banho ou atlético mínimo: Uso de sungas, biquínis, maiôs ou roupas de natação, INDEPENDENTE do local (mesmo em praias ou piscinas).
2. Ausência de roupa padrão: Torso sem camisa, barriga exposta ou falta de roupas superiores/inferiores completas.
3. Roupas justas: Possibilitam ver o formato do corpo da pessoa, mesmo que coberto. 
4. Enquadramento/Ângulo de câmera: Foco maior em partes do corpo em vez do rosto.
5. Se ficar na dúvida sobre a idade da pessoa, considere que é menor de idade.

# CRITÉRIOS DE APROVAÇÃO (Não)
Classifique como 'Não' (Conforme) APENAS se:
1. Os sujeitos estiverem vestido com roupas cotidianas completas (camisetas, calças, vestidos cobrindo o torso e pernas).
2. Não houver pessoas na imagem.
3. Todas as pessoas, mesmo que com roupas expositivas, são maiores de idade.

# FORMATO
[Sim/Não]; [Breve explicação técnica da classificação]
"""

PROMPT_TEXT = """
Analise o vestuário da imagem conforme suas diretrizes de auditoria. 
Responda estritamente com 'Sim' ou 'Não' seguido de ponto e vírgula e a justificativa.
"""
\end{lstlisting}

\begin{table}[htb]
	\IBGEtab{%
		\label{quad:prompt4}
		\caption{Performance com prompt 4}
	}{%
		\begin{tabular}{lccc}
			\toprule
			Métrica & Gemini 2.5 Flash  & Llama Scout  & Llama Maverick \\
			\midrule \midrule
			Acurácia & \(88,8\%\) & \(87,5\%\) & \(77,5\%\) \\
			\midrule 
			Precisão & \(81,6\%\) & \(85,7\%\) & \(92,3\%\) \\
			\midrule 
			Revocação & \(100,0\%\) & \(90,0\%\) & \(60,0\%\) \\
			\bottomrule
		\end{tabular}%
	}{%
		\fonte{Elaborada pelos autores.}%
	}
\end{table}

\section{Testes de temperatura}

Scout:
\begin{figure}[htb]
	\begin{center}
	\caption{Gráfico de performance do Llama Scout (usando prompt 3)}
    \label{fig:grafico_performance_scout}
	\includegraphics[width=0.8\textwidth]{USPSC-img/grafico_metricas_scout.png} \\
	\legend{Fonte: elaborado pelo autor}
	\end{center}	
\end{figure}

Maverick:
\begin{figure}[htb]
	\begin{center}
	\caption{Gráfico de performance do Llama Maverick (usando prompt 3)}
    \label{fig:grafico_performance_maverick}
	\includegraphics[width=0.8\textwidth]{USPSC-img/grafico_metricas_maverick.png} \\
	\legend{Fonte: elaborado pelo autor}
	\end{center}	
\end{figure}

Gemini:
\begin{figure}[htb]
	\begin{center}
	\caption{Gráfico de performance do Google Gemini 2.5 Flash (usando prompt 4)}
    \label{fig:grafico_performance_gemini}
	\includegraphics[width=0.8\textwidth]{USPSC-img/grafico_metricas_gemini.png} \\
	\legend{Fonte: elaborado pelo autor}
	\end{center}	
\end{figure}

\section{Testes de velocidade}

\begin{table}[htb]
	\IBGEtab{%
		\label{tab:tempo_execucao}
		\caption{Tempo de execução com melhor configuração de temperatura e prompt}
	}{%
		\begin{tabular}{lcccccc}
			\toprule
			Modelo & Temperatura & Prompt & Médio (s) & Mínimo (s) & Máximo (s) & Variância (s\(^2\))\\
			\midrule \midrule
			Scout & 0.5 & 3 & 1,36 & 0,98 & 1,78 & 0,03 \\
			\midrule 
			Maverick & 0 & 3 & 5,90 & 3,44 & 9,56 & 2,21 \\
			\midrule 
			2.5 Flash & 0 & 4 & 6,10 & 2,09 & 13,07 & 3,03 \\
			\bottomrule
		\end{tabular}%
	}{%
		\fonte{Elaborada pelo autor.}%
	}
\end{table}